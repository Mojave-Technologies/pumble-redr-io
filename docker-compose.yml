services:
  tunnel:
    image: cloudflare/cloudflared:latest
    command: tunnel --no-autoupdate --url http://host.docker.internal:8183
    extra_hosts:
      - "host.docker.internal:host-gateway"

  app:
    build: .
    ports:
      - "8183:8183"
    environment:
      - NODE_ENV=development
      - TUNNEL_URL=${TUNNEL_URL:-http://localhost:8183}
    stdin_open: true
    tty: true
